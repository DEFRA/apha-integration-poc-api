{% extends "layouts/page.njk" %}

{% from "govuk/components/table/macro.njk" import govukTable %}

{% block content %}

{{ appHeading({
    text: heading,
    caption: "Check another"
  }) }}

{% from "govuk/components/button/macro.njk" import govukButton %}

  <form method="get" action="/connectionsuite" autocomplete="off" novalidate>
      <div class="govuk-button-group">
        {{ govukButton({
          text: "< Back",
          classes: "govuk-button--primary",
          preventDoubleClick: true
        }) }}
      </div>
</form>

{{ govukTable({
  caption: "Connection result",
  captionClasses: "govuk-table__caption--m",
  rows: [
    [
      {
        text: "Connection URL"
      },
      {
        text: checkResult.baseurl
      }
    ],
   [
     {
       text: "Status Code"
     },
     {
       text: checkResult.status+" : "+checkResult.statusText
     }
   ],
    [
      {
        text: "Fetch Result"
      },
      {
        html: checkResult.fetchResultData.substring(0,300) + "...[snip]"
      }
    ],
    [
      {
        text: "Error"
      },
      {
        text: checkResult.errorMessage
      }
    ],
     [
       {
         text: "Stack Trace"
       },
       {
         html: checkResult.stack
       }
     ],
     [
       {
         text: "Dig "
       },
       {
         html: checkResult.digout
       }
     ],
     [
       {
         text: "NS Lookup"
       },
       {
         html: checkResult.nslookup
       }
     ],
          [
       {
         text: "NS Lookup Error"
       },
       {
         html: checkResult.nslookupError
       }
     ],
     [
       {
         text: "Curl Result StdError"
       },
       {
         html: checkResult.curlResultError
       }
     ],
     [
       {
         text: "Curl Result"
       },
       {
         html: checkResult.curlResult.substring(0,300) + "...[snip]"
       }
     ],
     [
       {
         text: "DB Result StdError"
       },
       {
         html: checkResult.dbResultError
       }
     ],
     [
       {
         text: "DB Result"
       },
       {
         html: checkResult.dbResult.substring(0,300) + "...[snip]"
       }
     ],
     [
       {
         text: "DB Alt Result StdError"
       },
       {
         html: checkResult.dbAltResultError
       }
     ],
     [
       {
         text: "DB Alt Result"
       },
       {
         html: checkResult.dbAltResult.substring(0,300) + "...[snip]"
       }
     ],
     [
       {
         text: "Connection Test Result Error"
       },
       {
         html: checkResult.connectionResultError
       }
     ],
     [
       {
         text: "Connection Test Result"
       },
       {
         html: checkResult.connectionResult
       }
     ]
  ]
}) }}

{% endblock %}

